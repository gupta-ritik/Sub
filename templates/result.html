{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-7">
    <div class="card mb-3 shadow-sm">
      <div class="card-body">
        <h4>Subnet Result</h4>
        <p><strong>IP:</strong> {{ data.ip }} &nbsp; <strong>Mask:</strong> {{ data.mask }} &nbsp; <strong>CIDR:</strong> /{{ data.cidr }}</p>
        <p><strong>Class:</strong> {{ data.class }}</p>

        <hr>
        <p><b>Network:</b> {{ data.network_address }}</p>
        <p><b>Broadcast:</b> {{ data.broadcast_address }}</p>
        <p><b>Total addresses:</b> {{ data.total_addresses }}</p>
        <p><b>Usable hosts:</b> {{ data.usable_hosts }}</p>
        <p><b>First host:</b> {{ data.first_host }}</p>
        <p><b>Last host:</b> {{ data.last_host }}</p>
        <p><b>Wildcard:</b> {{ data.wildcard_mask }}</p>

        <div class="mt-3">
          <a href="{{ url_for('export_pdf_single') }}" class="btn btn-outline-primary">Export PDF</a>
          <a href="{{ url_for('index') }}" class="btn btn-secondary">New Calculation</a>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-5">
    <!-- Animated network diagram -->
    <div class="card shadow-sm">
      <div class="card-body">
        <h5>Network Diagram</h5>
        <svg viewBox="0 0 400 220" width="100%" height="220" id="net-svg">
          <!-- network cloud -->
          <g>
            <rect x="20" y="20" width="120" height="60" rx="10" fill="#f1f3f5"></rect>
            <text x="80" y="55" text-anchor="middle">Network<br>{{ data.network_address }}/{{ data.cidr }}</text>
          </g>

          <!-- router -->
          <g transform="translate(170,40)">
            <circle cx="0" cy="0" r="28" fill="#e9ecef" class="node pulse"></circle>
            <text x="0" y="5" text-anchor="middle">R</text>
          </g>

          <!-- hosts -->
          <g id="hosts" transform="translate(260,20)">
            <g transform="translate(0,0)">
              <rect x="0" y="0" width="110" height="36" rx="6" class="node"></rect>
              <text x="55" y="22" text-anchor="middle">Host 1</text>
            </g>
            <g transform="translate(0,60)">
              <rect x="0" y="0" width="110" height="36" rx="6" class="node"></rect>
              <text x="55" y="22" text-anchor="middle">Host 2</text>
            </g>
            <g transform="translate(0,120)">
              <rect x="0" y="0" width="110" height="36" rx="6" class="node"></rect>
              <text x="55" y="22" text-anchor="middle">Host n</text>
            </g>
          </g>
        </svg>

        <small class="text-muted">Nodes pulse to show live activity â€” simple animation for visualization.</small>
      </div>
    </div>
  </div>
</div>

<script>
  // small JS to animate host nodes briefly
  document.addEventListener('DOMContentLoaded', function(){
    let nodes = document.querySelectorAll('.node');
    nodes.forEach((n, i) => {
      setTimeout(() => n.classList.add('pulse'), i*200);
      setTimeout(() => n.classList.remove('pulse'), 3000 + i*200);
    });
  });
</script>
{% endblock %}
